{% extends "base.html" %}

{% block title %}Monitoring - Multi-Agent Scheduler{% endblock %}

{% block content %}
<div class="monitoring-page">
    <h2>ðŸ“ˆ System Monitoring</h2>

    <div class="monitoring-links">
        <div class="link-card">
            <h3>Jaeger Tracing</h3>
            <p>Distributed tracing and request monitoring</p>
            <a href="http://localhost:16686" target="_blank" class="btn btn-primary">Open Jaeger â†’</a>
        </div>

        <div class="link-card">
            <h3>Prometheus Metrics</h3>
            <p>Time-series metrics and monitoring</p>
            <a href="http://localhost:9090" target="_blank" class="btn btn-primary">Open Prometheus â†’</a>
        </div>

        <div class="link-card">
            <h3>Grafana Dashboards</h3>
            <p>Visualization and alerting</p>
            <a href="http://localhost:3000" target="_blank" class="btn btn-primary">Open Grafana â†’</a>
        </div>
    </div>

    <div class="metrics-summary">
        <h3>ðŸ“Š Current Metrics</h3>
        <div id="metricsData"></div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
async function loadMetrics() {
    const response = await fetch('/api/metrics');
    const data = await response.json();

    document.getElementById('metricsData').innerHTML = `
        <div class="metric-item">
            <span>Active Tasks:</span>
            <strong>${data.active_tasks}</strong>
        </div>
        <div class="metric-item">
            <span>Total Errors:</span>
            <strong>${data.total_errors}</strong>
        </div>
        <div class="metric-item">
            <span>Uptime:</span>
            <strong>${data.uptime}s</strong>
        </div>
    `;
}

loadMetrics();
setInterval(loadMetrics, 5000);
</script>
{% endblock %}
