{% extends "base.html" %}

{% block title %}Dashboard - Multi-Agent Scheduler{% endblock %}

{% block content %}
<div class="dashboard">
    <h2>ğŸ“Š System Dashboard</h2>

    <div class="stats-grid">
        <div class="stat-card">
            <h3>Status</h3>
            <p class="stat-value {% if health.status == 'healthy' %}status-healthy{% else %}status-error{% endif %}">
                {{ health.status }}
            </p>
        </div>

        <div class="stat-card">
            <h3>Active Tasks</h3>
            <p class="stat-value">{{ health.active_tasks }}</p>
        </div>

        <div class="stat-card">
            <h3>Total Completed</h3>
            <p class="stat-value">{{ health.total_tasks_completed }}</p>
        </div>

        <div class="stat-card">
            <h3>Errors</h3>
            <p class="stat-value {% if health.total_errors > 10 %}status-warning{% endif %}">
                {{ health.total_errors }}
            </p>
        </div>

        <div class="stat-card">
            <h3>Uptime</h3>
            <p class="stat-value">{{ health.uptime }}s</p>
        </div>

        <div class="stat-card">
            <h3>Version</h3>
            <p class="stat-value">{{ health.version }}</p>
        </div>
    </div>

    <div class="services-section">
        <h3>ğŸ”§ Services Status</h3>
        <ul class="services-list">
            {% for service, status in health.services.items() %}
            <li class="service-item">
                <span class="service-name">{{ service }}</span>
                <span class="service-status status-{{ status }}">{{ status }}</span>
            </li>
            {% endfor %}
        </ul>
    </div>

    <div class="quick-actions">
        <h3>âš¡ Quick Actions</h3>
        <button class="btn btn-primary" onclick="refreshData()">ğŸ”„ Refresh</button>
        <a href="/tasks" class="btn btn-secondary">ğŸ“ View Tasks</a>
        <a href="/workflows" class="btn btn-secondary">ğŸ”€ Workflows</a>
        <a href="/monitoring" class="btn btn-secondary">ğŸ“ˆ Monitoring</a>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
function refreshData() {
    fetch('/api/health')
        .then(response => response.json())
        .then(data => {
            console.log('Health data:', data);
            location.reload();
        });
}

// Auto-refresh every 10 seconds
setInterval(refreshData, 10000);
</script>
{% endblock %}
