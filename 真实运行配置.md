# 🔥 如何真实运行AI（需要API key）

## ⚠️ 注意事项

- **需要Claude API key**（需要付费）
- **需要网络连接**
- **每次运行约花费 $0.02-0.05**
- **演示时如果网络不好可能失败**

---

## 🔧 配置步骤

### 第1步：获取API Key

1. 访问：https://console.anthropic.com/
2. 注册账号（需要信用卡）
3. 获取API key（以 `sk-ant-api03-` 开头）

### 第2步：创建配置文件

```bash
cd multi-agent-scheduler

# 复制示例文件
cp .env.example .env

# 编辑.env文件，填入你的API key
nano .env  # 或用其他编辑器
```

**在 `.env` 文件中填入：**
```
ANTHROPIC_API_KEY=sk-ant-api03-你的真实key
```

### 第3步：真实运行

```bash
# 激活环境
source venv/bin/activate

# 方式1：交互模式（手动输入任务）
python smart_demo.py --interactive
# 选择 "1. Real API mode"
# 然后输入任务，例如："Build a blog website"

# 方式2：预设模式
python smart_demo.py --preset
# 选择 "1. Real API mode"
# 选择一个预设任务

# 方式3：直接运行（需要修改代码）
python smart_demo.py  # 默认会问你选模式
```

---

## 📊 真实运行会看到什么

### Mock模式输出：
```
🧠 Step 1: Decomposing task with AI...
⚠️  Using manual decomposition (mock mode)
```

### 真实API模式输出：
```
🧠 Step 1: Decomposing task with AI...
⚡ Meta-Agent analyzing task...
✓ Decomposed into 5 subtasks

📋 Task Breakdown:
├─ task1: Design database schema for blog posts and users
├─ task2: Create responsive UI layouts and components
├─ task3: Implement backend API with authentication [depends on: task1]
├─ task4: Build frontend with React/Vue [depends on: task2]
└─ task5: Write integration tests [depends on: task3, task4]
```

**区别**：
- ✅ 任务描述更详细（AI生成）
- ✅ 依赖关系由AI分析
- ✅ 任务数量由AI决定（可能3-10个）

---

## 💰 成本估算

- **每次任务分解**：$0.01-0.02（Claude API）
- **每次任务执行**：$0.01-0.03（取决于任务复杂度）
- **演示5次**：约 $0.10-0.25

---

## ⚡ 快速测试（有API key的话）

```bash
# 设置环境变量（临时，仅本次终端有效）
export ANTHROPIC_API_KEY="sk-ant-api03-你的key"

# 运行测试
cd multi-agent-scheduler
source venv/bin/activate
python -c "
import asyncio
from meta_agent import MetaAgent
import os

async def test():
    key = os.getenv('ANTHROPIC_API_KEY')
    if not key:
        print('❌ 没有找到API key')
        return

    meta = MetaAgent(api_key=key)
    print('🧠 测试真实AI任务分解...')
    tasks = await meta.decompose_task('Build a simple blog website')

    print(f'✓ 成功分解为 {len(tasks)} 个任务：')
    for task in tasks:
        deps = f' [depends on: {task.depends_on}]' if task.depends_on else ''
        print(f'  - {task.id}: {task.prompt}{deps}')

asyncio.run(test())
"
```

如果看到任务列表，说明API工作了！

---

## 🎯 周一演示建议

### **方案A：只用Mock模式**（推荐）⭐

**优点**：
- ✅ 不依赖网络
- ✅ 速度快，演示流畅
- ✅ 展示核心功能（调度器）

**说明方式**：
- "这是Mock模式，展示调度器的并行能力"
- "真实模式会调用Claude API自动分解任务"
- "调度算法和性能提升是真实的"

---

### **方案B：Mock + 真实混合**（如果有API）

**流程**：
1. 先用Mock模式演示（快速展示）
2. 然后说："让我展示真实AI分解"
3. 运行真实API模式（如果网络好）

**优点**：
- ✅ 展示完整功能
- ✅ 有备选方案

**风险**：
- ⚠️ 网络可能慢/失败
- ⚠️ 需要准备API key

---

### **方案C：只用真实API**（不推荐）

**风险太大**：
- ❌ 网络问题可能导致失败
- ❌ API超时/限流
- ❌ 需要花钱

---

## 🆘 如果真实API失败怎么办

1. **立即切换Mock模式**
   ```bash
   python smart_demo.py --test  # Mock模式
   ```

2. **解释**：
   - "演示环境网络问题，我们用Mock模式展示"
   - "调度器功能是完全一样的"

3. **展示代码**：
   - 打开 `meta_agent.py` 展示AI分解代码
   - 说："这里是调用Claude API的代码"

---

## ✅ 我的最终建议

### **周一演示就用Mock模式！**

**原因**：
1. **你的核心贡献是调度器**，不是AI分解
2. Mock模式完整展示了调度功能
3. 更可靠、更快、演示效果更好
4. 可以说："如果配置API key就能真实运行"

**真实API的价值**：
- 证明系统设计完整
- 可以处理真实场景
- 但对演示来说，Mock已经足够

---

## 💡 演示时怎么说

### 如果用Mock模式：

**开场白**：
> "今天演示用Mock模式，因为教室网络不稳定。Mock模式完整展示了我们的核心创新：智能调度器。如果配置Claude API key，系统可以真实调用AI自动分解任务。"

**强调**：
> "重点是调度算法：依赖分析、拓扑排序、并行执行。这些都是真实的，不是模拟的。性能提升73%是真实测量的。"

---

**总结**：
- 🟢 周一演示：用Mock模式（推荐）
- 🟡 如果有API key且想展示：可以真实运行
- 🔴 不建议：完全依赖真实API演示（风险大）

**Mock模式不是缺点，是合理的演示选择！** ✅
